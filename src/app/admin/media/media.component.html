<div class="media-container">
  <h1>Media Management</h1>

  <mat-tab-group>
    <mat-tab label="Images">
      <div class="media-grid">
        @for (image of images; track image._id) {
        <mat-card class="media-card">
          <img [src]="apiUrl + '/data/' + image.filename" alt="Image" mat-card-image />
          <mat-card-actions align="end">
            <button matButton="tonal" (click)="copyUrl(apiUrl + '/data/' + image.filename)">
              <mat-icon fontIcon="content_copy"></mat-icon>
              Copier l'URL
            </button>
            <button matIconButton (click)="removeMedia(image)" class="btn-error">
              <mat-icon fontIcon="delete"></mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
        }
      </div>

      <div class="upload-section">
        <input
          type="file"
          #imageInput
          style="display: none"
          (change)="uploadImage($event)"
          accept="image/png,image/jpeg,image/gif"
        />
        <button matButton="filled" (click)="imageInput.click()">
          <mat-icon fontIcon="add_photo_alternate"></mat-icon>
          Ajouter une Image
        </button>
      </div>
    </mat-tab>

    <mat-tab label="Sounds">
      <div class="media-grid">
        @for (sound of sounds; track sound._id) {
        <mat-card class="media-card">
          <mat-card-content>
            <audio controls [src]="apiUrl + '/data/' + sound.filename"></audio>
          </mat-card-content>
          <mat-card-actions align="end">
            <button matButton="tonal" (click)="copyUrl(apiUrl + '/data/' + sound.filename)">
              <mat-icon fontIcon="content_copy"></mat-icon>
              Copier l'URL
            </button>
            <button matIconButton (click)="removeMedia(sound)" class="btn-error">
              <mat-icon fontIcon="delete"></mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
        }
      </div>

      <div class="upload-section">
        <input
          type="file"
          #soundInput
          style="display: none"
          (change)="uploadSound($event)"
          accept="audio/mpeg,audio/wav"
        />
        <button matButton="filled" (click)="soundInput.click()">
          <mat-icon fontIcon="audio_file"></mat-icon>
          Ajouter un audio
        </button>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
